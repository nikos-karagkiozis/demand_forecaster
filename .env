# Core GCP
PROJECT_ID="my-forecast-project-18870"
REGION="us-central1"
LOCATION="US"

# Artifact Registry images
REPO="sales-forecast-repo"
IMAGE="sales-forecast"
SERVE_IMAGE="sales-forecast-serve"

# Training image (auto-derived if omitted)
DOCKER_IMAGE_URI="${REGION}-docker.pkg.dev/${PROJECT_ID}/${REPO}/${IMAGE}:latest"

# Serving image (auto-derived if omitted)
SERVING_IMAGE_URI="${REGION}-docker.pkg.dev/${PROJECT_ID}/${REPO}/${SERVE_IMAGE}:latest"

# Pipelines
PIPELINE_ROOT="gs://${PROJECT_ID}-staging/pipeline_root"
SERVICE_ACCOUNT="ds-pipeline-sa@${PROJECT_ID}.iam.gserviceaccount.com"

# BigQuery ingest
DATASET="gk2_takeaway_sales"
STAGING_TABLE="staging_daily_sales"
FINAL_TABLE="daily_sales_features"
GCS_URI="gs://${PROJECT_ID}-staging/input/${FINAL_TABLE}.csv"

# Model artifacts
# Used by Cloud Run Jobs (train uploads here; predict downloads from here)
MODEL_GCS_URI="gs://${PROJECT_ID}-staging/models/model.joblib"

# Deployment toggle for KFP (off by default)
# Set to true to let the pipeline's optional step register+deploy
ENABLE_DEPLOY="false"

# Optional: set after deploy for the demo notebook
# ENDPOINT_ID="projects/${PROJECT_ID}/locations/${REGION}/endpoints/1234567890"

# Hyperparameter Tuning (Cloud Run + Pipelines)
ENABLE_HPT="true"                         # Cloud Run HPT (submit + train best)
ENABLE_HPT_IN_PIPELINE="true"             # Pipeline HPT inside KFP graph

# Shared HPT knobs (used by both paths)
HPT_MAX_TRIALS="20"
HPT_PARALLEL_TRIALS="4"
HPT_METRIC_NAME="mae"                      # mae | rmse | r2  (your trainer reports the same)
HPT_METRIC_GOAL="minimize"                 # minimize | maximize
HPT_MACHINE_TYPE="n1-standard-4"

# Where to store best params from HPT (Cloud Run path)
BEST_PARAMS_URI="gs://${PROJECT_ID}-staging/hpt/best_params.json"

# Optional HPT search space (pick one)
# HPT_PARAM_SPACE_GCS="gs://${PROJECT_ID}-staging/hpt/param_space.json"   # Cloud Run HPT supports this
# HPT_PARAM_SPACE_JSON='{"learning_rate":{"type":"double","min":0.001,"max":0.3,"scale":"log"}, "num_leaves":{"type":"integer","min":16,"max":512}}'  # Both paths support JSON string

# Training early stop (optional; default 100)
EARLY_STOPPING_ROUNDS="100"